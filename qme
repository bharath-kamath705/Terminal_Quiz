#!/bin/bash

#set directory for qme program and files
QME=${HOME}/Documents/Terminal_Quiz

#total number of question in the question bank
NUM_LINES="$(cat $QME/qme_questions.txt | wc -l)"

case "$1" in

	-q|--question)
	#Show Nth question  
	#----------------------------------------
	sed "$2q;d" $QME/qme_questions.txt
	;;

	-a|--answer)
	#Show Nth question and answer  
	#----------------------------------------
	sed "$2q;d" $QME/qme_answers.txt
	;;


	--remove)
	#remove Nth question and answer
	#----------------------------------------	
	let top=$2-1
	let bot=$NUM_LINES-$2	
	
	#remove question and write to qtmp.txt
	head $QME/qme_questions.txt -n $top >$QME/qtmp.txt
	tail $QME/qme_questions.txt -n $bot >>$QME/qtmp.txt

	#remove answer and write to atmp.txt
	head $QME/qme_answers.txt -n $top >$QME/atmp.txt
	tail $QME/qme_answers.txt -n $bot >>$QME/atmp.txt

	#re-number lines and remove qtmp.txt and atmp.txt
	cut $QME/qtmp.txt --fields 2 | cat -n | tee $QME/qme_questions.txt >/dev/null
	cut $QME/atmp.txt --fields 2 | cat -n | tee $QME/qme_answers.txt >/dev/null	
	rm $QME/qtmp.txt $QME/atmp.txt	
	;; 


	*)
	#show random question     	
	#----------------------------------------
        cat $QME/qme_questions.txt | head -n $(shuf -i 1-${NUM_LINES} -n 1) | tail -n 1
esac

#logs to keep track of number of times qme was called
date >> $QME/qme_session.log  # erased every session
date >> $QME/qme_alltime.log  
